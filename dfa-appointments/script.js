$(document).ready(function () {
  const branches = [
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=dfa%20-%20oca%20(aseana)&_=1659056252897",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20northeast%20(ali%20mall)&_=1659056252898",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20south%20(alabang)&_=1659056252899",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20west%20(sm%20manila)&_=1659056252900",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20la%20union&_=1659056252901",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20pampanga&_=1659056252902",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20iloilo&_=1659056252903",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20cebu&_=1659056252904",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20cagayan%20de%20oro&_=1659056252905",
    "https://appt.dfaapostille.ph/appointment/Home/GetBranch?branch=co%20davao&_=1659056252896",
  ];

  for (var i = 0; i < branches.length; i++) {
    $.get(
      "https://dfa-anywhere.herokuapp.com/" + branches[i],
      function (branch) {
        const dates = JSON.parse(branch.availableDates);
        console.log("branchName", branch.branchName);

        const availableDates = dates.filter(
          (date) => date.title === "Available"
        );
        console.log("availableDates", availableDates);

        availableDates.forEach((date, index) => {
          $("div").append(
            "<p>" +
              "<b>" +
              branch.branchName +
              "</b> " +
              date.title +
              " " +
              date.start +
              "</p>"
          );
        });
      }
    );
  }
});
